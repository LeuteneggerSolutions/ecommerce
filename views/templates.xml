<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- TEMPLATE TO SHOW BRANDS AND ATTRIBUTES BASED ON CATEGORY -->
        <template id="website_sale.products_attributes" inherit_id="website_sale.products_categories" active="False" customize_show="True" name="Product Attribute's Filters">
          <xpath expr="//ul" position="after">
            <t t-if="attributes">
              <form class="js_attributes" method="get">
                  <input type="hidden" name="search" t-att-value="search"/>
                  <ul class="nav nav-pills nav-stacked mt16">
                      <t t-foreach="attributes" t-as="a">
                        <t t-if="a.type != 'hidden'">
                          <li t-if="a.value_ids and len(a.value_ids) > 1">
                            <div class="panel panel-default">
                              <div class="panel-heading"><strong t-field="a.name"/></div>
                              <div class="panel-body">
                              <t t-if="a.type == 'select'">
                                <select class="form-control" name="attrib">
                                  <option value=""/>
                                  <t t-foreach="a.value_ids" t-as="v">
                                    <option t-att-value="'%s-%s' % (a.id,v.id)" t-esc="v.name" t-att-selected="'selected' if v.id in attrib_set else ''"/>
                                  </t>
                                </select>
                              </t>
                              <t t-if="a.type == 'radio'">
                                <ul class="nav nav-pills nav-stacked">
                                    <t t-foreach="a.value_ids" t-as="v">
                                        <li t-att-class="'active' if v.id in attrib_set else ''">
                                            <label style="margin: 0 20px;">
                                                <input type="checkbox" name="attrib" t-att-value="'%s-%s' % (a.id,v.id)" t-att-checked="'checked' if v.id in attrib_set else ''"/>
                                                <span style="font-weight: normal" t-field="v.name"/>
                                            </label>
                                        </li>
                                    </t>
                                </ul>
                              </t>
                              <t t-if="a.type == 'color'">
                                <t t-foreach="a.value_ids" t-as="v">
                                  <label t-attf-style="background-color:#{v.color or v.name}"
                                      t-attf-class="css_attribute_color #{'active' if v.id in attrib_set else ''}">
                                      <input type="checkbox"
                                          name="attrib"
                                          t-att-value="'%s-%s' % (a.id,v.id)"
                                          t-att-checked="'checked' if v.id in attrib_set else ''"
                                          t-att-title="v.name"/>
                                  </label>
                                </t>
                              </t>

                            </div>
                           </div>
                          </li>
                        </t>
                      </t>
                  </ul>
              </form>
            </t>
            <t t-if="brands">
                <div class="panel panel-default">
                    <div class="panel-heading">Brands</div>
                    <div class="panel-body">
                      <ul class="nav nav-pills nav-stacked mt16">
                          <t t-foreach="brands" t-as="b">
                          <li t-att-class="'brand active' if b.id == int(brand or 0) else ''">
                            <a t-att-href="keep('/shop/brands',brand = b.id)"><t t-esc="b.name"/></a>
                          </li>
                          </t>
                      </ul>
                    </div>
                </div>
            </t>
          </xpath>
          <xpath expr="//div[@id='products_grid_before']" position="attributes">
              <attribute name="class">col-md-3 hidden-xs</attribute>
          </xpath>
          <xpath expr="//div[@id='products_grid']" position="attributes">
              <attribute name="class">col-md-9</attribute>
          </xpath>
        </template>

        <!-- TEMPLATE TO SHOW BRAND LIST -->
        <template id="product_brands_column" inherit_id="website_sale.products" active="False" customize_show="True" name="Product Brands">
          <xpath expr="//div[@id='products_grid_before']" position="inside">
              <div class="dropdown">
                  <p class="active">Select a Brand</p>
                  <button class="btn btn-default dropdown-toggle" type="button" id="brandDropDown" data-toggle="dropdown" aria-haspopup="true">Select a Brand
                  <span class="caret"></span>
                  </button>
                      <ul class="dropdown-menu" aria-labelledby="brandDropDown">
                      <li t-att-class=" '' if brand else 'brand active' "><a t-att-href="keep('/shop',brand=0)"><b>All Brands</b></a></li>
                      <t t-foreach="brands" t-as="b">
                          <li t-att-class="'brand active' if b.id == int(brand or 0) else ''">
                              <a t-att-href="keep('/shop/brands',brand = b.id)"><t t-esc="b.name"/></a>
                          </li>
                      </t>
                      </ul>
              </div>
          </xpath>
          <xpath expr="//div[@id='products_grid_before']" position="attributes">
              <attribute name="class">col-md-3 hidden-xs</attribute>
          </xpath>
          <xpath expr="//div[@id='products_grid']" position="attributes">
              <attribute name="class">col-md-9</attribute>
          </xpath>
        </template>

        <!-- TEMPLATE TO ADD DATA RATING TO EACH DIV -->
        <template id="product_div_rating" inherit_id="website_sale.products_list_view" active="True">
          <xpath expr="//div[@class='oe_product oe_list oe_product_cart']" position="attributes">
                <attribute name="data-rating"><t t-esc="product.rating and product.rating or '0'"/></attribute>
          </xpath>
        </template>

        <template id="product_sort_bar" inherit_id="website_sale.products_list_view" active="True">
          <xpath expr="//div[@id='products_grid']" position="before">
            <div class="col-md-9">
              <label for="Order_top">Sort by : </label>
              <select id="product_sorter">
                <option value="0" selected="selected">Select...</option>
                <option value="rating">Customer Rating</option>
                <option value="name">Product Name</option>
                <option value="hottest">Hottest</option>
                <option value="popularity">Popularity</option>
              </select>
            </div>
          </xpath>
        </template>
        <!-- TEMPLATE TO SHOW RATING ON PRODUCT LIST -->
        <template id="product_list_rating" inherit_id="website_sale.products_item" active="True">
          <xpath expr="//div[@class='product_price']" position="inside">
                <div id="stars_global" class="starrr pull-right" t-att-data-rating="product.rating"></div>
          </xpath>
        </template>
    </data>
</openerp>
